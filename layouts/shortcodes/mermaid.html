{{ if not (.Page.Scratch.Get "mermaid") }}
<!-- Include mermaid only first time -->
<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';

    mermaid.registerIconPacks([
      {
        name: 'devicon',
        loader: () =>
          fetch('https://unpkg.com/@iconify-json/devicon@1/icons.json').then((res) => res.json()),
      },
    ]);
  </script>
{{ .Page.Scratch.Set "mermaid" true }}
{{ end }}
<p class="mermaid{{ with (.Get "class") }} {{ . }}{{ end }}">{{- .Inner -}}</p>